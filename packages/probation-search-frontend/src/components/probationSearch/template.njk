{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/pagination/macro.njk" import govukPagination %}
{% from "govuk/components/table/macro.njk" import govukTable %}

<form method="POST">
    <input type="hidden" name="_csrf" value="{{ params.results.csrfToken }}">

    {{ govukInput({
        autocomplete: params.autocomplete,
        errorMessage: params.results.errorMessage,
        hint: params.hint if params.hint else {
            text: "Search using identifiers, names, aliases, date of birth..."
        },
        id: params.id,
        label: params.label if params.label else {
            text: "Search for a person on probation",
            classes: "govuk-label--l",
            isPageHeading: true
        },
        name: params.name,
        type: "text",
        value: params.results.query
    }) }}

    {{ govukButton({ text: "Search" }) }}
</form>

{% if params.results.results | length %}
    <p data-qa="result-summary">Showing {{ params.results.page.from }} to {{ params.results.page.to }} of {{ params.results.page.totalResults }} results.</p>
    {{ govukTable({ firstCellIsHeader: true, head: params.results.headers, rows: params.results.results }) }}
    {% if params.results.page.items | length > 1 %}
        {{ govukPagination({ previous: { href: params.results.page.prev }, next: { href: params.results.page.next }, items: params.results.page.items }) }}
    {% endif %}
    {% elif params.results.query != null %}
    <p>There are no results for your search. Try refining your query above.</p>
{% endif %}